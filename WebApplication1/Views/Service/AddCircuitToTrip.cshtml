@model WebApplication1.Models.TripViewModel

@Html.Partial("_HomepageCarousel")

@if (Model.ActiveTrip != null)
{
    <div class="headline">
        <h2>Your trip to: @Model.ActiveTrip.DlTripView.Name</h2>        
    </div>
    <div class="row">
        <div class="col-sm-4 info-blocks">
            <i class="icon-calendar icon-info-blocks"></i>
            <div class="info-blocks-in">
                <h3>Planned date: @Model.ActiveTrip.DlTripView.StartDate.Value.ToLongDateString()</h3>
                <p>At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum animi..</p>
            </div>
        </div>
        <div class="col-sm-4 info-blocks">
            <i class="icon-ok-sign icon-info-blocks"></i>
            <div class="info-blocks-in">
                <h3>Status: @Model.ActiveTrip.DlTripView.Status</h3>
                <p>At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum animi..</p>
            </div>
        </div>
        <div class="col-sm-4 info-blocks">
            <i class="icon-map-marker icon-info-blocks"></i>
            <div class="info-blocks-in">
                <h3>Starts at: @Model.ActiveTrip.DlTripView.StartLocation</h3>
                <p>At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum animi..</p>
            </div>
        </div>
    </div>

    <hr class="margin-bottom-40">
}

@if (Model != null && Model.CreateTripTemplate != null)
{
    <div class="headline"><h3>Add to my trip plan:</h3></div>

    using (Html.BeginForm("AddCircuitToTripSubmit", "Service", new { ReturnUrl = ViewBag.ReturnUrl }, FormMethod.Post, new { role = "form" }))
    {
        @Html.AntiForgeryToken();

        // the templateId
        @Html.HiddenFor(p => p.CreateTripTemplate.DlTemplate.Id);
        @Html.HiddenFor(p => p.ActiveTrip.DlTripView.Id);

        <div class="container blog-full-width">
            <div class="blog margin-bottom-20">
                <div class="blog-img">
                    <img class="img-responsive" src="@Model.CreateTripTemplate.DlTemplate.ThumbnailPath" alt="">
                </div>
                <h2>@Model.CreateTripTemplate.DlTemplate.Name</h2>                
                <p>@Model.CreateTripTemplate.DlTemplate.Description</p>
                <p><button class="btn-u btn-u-orange" type="submit"><i class="icon-cogs "></i> Add to my trip</button></p>
            </div>

            @if (!String.IsNullOrEmpty(Model.CreateTripTemplate.DlTemplate.AdditionalHtml))
            {
                <div class="row margin-bottom-20">
                    @Html.Raw(Model.CreateTripTemplate.DlTemplate.AdditionalHtml)
                </div>
            }

            <div class="media margin-bottom-20">
                @foreach (var step in Model.CreateTripTemplate.DlTemplateSteps)
                {
                    <h3>@step.ShortDescription</h3>
                    <p>@step.LongDescription</p>                    
                }
            </div>            
        </div>
    }
}
